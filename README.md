# Task Tracker API

Task Tracker API — это RESTful API для управления задачами сотрудников, разработанное на Django. С помощью этого API можно управлять сотрудниками и их задачами, а также получать информацию о загруженности сотрудников и важных задачах, которые требуют внимания. Проект включает поддержку аутентификации с использованием JWT, а также предоставляет документацию API через Swagger и ReDoc.

## Стек технологий

- Python 3.12
- Django 5.1
- Django REST Framework
- PostgreSQL
- Docker
- Swagger (drf_yasg)
- JWT (rest_framework_simplejwt)

## Функциональность

### Основные функции

#### CRUD операции для сотрудников

- **Создание, чтение, обновление и удаление записей о сотрудниках.**
- **Поля:**
  - ФИО
  - Должность
  - Дополнительные поля (по необходимости)

#### CRUD операции для задач

- **Создание, чтение, обновление и удаление записей о задачах.**
- **Поля:**
  - Наименование
  - Ссылка на родительскую задачу (если есть зависимость)
  - Исполнитель
  - Срок
  - Статус
  - Дополнительные поля (по необходимости)

### Специальные эндпоинты

#### Занятые сотрудники

- **Возвращает список сотрудников и их задачи, отсортированный по количеству активных задач.**

#### Важные задачи

- **Возвращает задачи, которые не взяты в работу, но от которых зависят другие задачи, взятые в работу.**
- **Находит сотрудников, которые могут взять эти задачи (наименее загруженный или выполняющий родительскую задачу).**
- **Формат ответа:**
  - `{Важная задача, Срок, [ФИО сотрудника]}`

## Запуск проекта

### Локальный запуск

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/Crazilina/task_tracker.git
    cd task_tracker
    ```

2. Создайте и активируйте виртуальное окружение:

    ```bash
    python -m venv env
    source env/bin/activate
    ```

3. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

4. Настройте переменные окружения

Скопируйте шаблон файла .env.sample в файл .env и отредактируйте его, добавив свои данные:
```sh
cp .env.sample .env
```

5. **Примените миграции и создайте суперпользователя**:

   a) Примените миграции:
    
        ```bash
        python manage.py makemigrations
        python manage.py migrate
        ```

    b) Автоматически создайте суперпользователя с использованием команды `csu`:

        ```bash
        python manage.py csu
        ```

6. Запустите сервер разработки:

    ```bash
    python manage.py runserver
    ```
7. **Доступ к админ-панели**:

    Откройте в браузере: `http://127.0.0.1:8000/admin/` и войдите с использованием учетных данных суперпользователя.

---


### Запуск проекта в Docker

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/Crazilina/task_tracker.git
    cd task_tracker
    ```

2. Настройте переменные окружения

Скопируйте шаблон файла .env.sample в файл .env и отредактируйте его, добавив свои данные:
```sh
cp .env.sample .env
```

3. Соберите и запустите контейнеры:

    ```bash
    docker-compose up -d --build
    ```

4. Примените миграции и создайте суперпользователя:

    Для этого выполните команду в контейнере:

    ```bash
    docker-compose run --rm app python manage.py migrate
    docker-compose run --rm app python manage.py csu
    ```

5. Откройте браузер и перейдите по адресу `http://localhost:8000/swagger/`, чтобы просмотреть документацию API.


6. **Доступ к админ-панели**:

    Откройте в браузере: `http://127.0.0.1:8000/admin/` и войдите с использованием учетных данных суперпользователя.


7. **Остановка контейнеров**:

    Для остановки контейнеров и удаления их используйте команду:
```bash
    docker-compose down
```

8. **Очистка ресурсов**:

    Если нужно очистить все контейнеры, тома и сети, используйте следующие команды:
```bash
    docker-compose down --volumes --remove-orphans
    docker system prune -a --volumes
```

---
## API Документация

Документация API доступна в формате Swagger и ReDoc:

- [Swagger UI](http://localhost:8000/swagger/)
- [ReDoc](http://localhost:8000/redoc/)

## Тестирование

Для запуска тестов выполните:

```bash
python manage.py test
